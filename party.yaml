# Party file for freelan-all
attendees:
  libiconv:
    filters: msvc
    source: third-party/source/libiconv-msvc
    builders:
      msvc-x86:
        tags: x86
        filters: msvc-x86
        prefix: x86
        commands:
          - 'msbuild libiconv.sln /p:Configuration=ReleaseStatic /p:Platform="Win32"'
          - 'md {{prefix}}\lib || echo'
          - 'md {{prefix}}\include || echo'
          - 'copy ReleaseStatic_Win32\libiconvStatic.lib {{prefix}}\lib\libiconv.lib'
          - 'xcopy include\* {{prefix}}\include\ /S'
      msvc-x64:
        tags: x64
        filters: msvc-x64
        prefix: x64
        commands:
          - 'msbuild libiconv.sln /p:Configuration=ReleaseStatic /p:Platform="x64"'
          - 'md {{prefix}}\lib'
          - 'md {{prefix}}\include'
          - 'xcopy ReleaseStatic_x64\libiconvStatic.lib {{prefix}}\lib\libiconv.lib'
          - 'xcopy include\* {{prefix}}\include\'
  boost:
    filters: msvc
    depends: ['libiconv']
    source:
      location: http://sourceforge.net/projects/boost/files/boost/1.53.0/boost_1_53_0.zip/download
      type: application/zip
    builders:
      msvc-x86:
        tags: x86
        filters: msvc-x86
        prefix: x86
        commands:
          - 'bootstrap.bat'
          - 'b2 --prefix={{prefix}} --layout=system --without-serialization toolset=msvc variant=release link=static threading=multi runtime-link=shared install'
      msvc-x64:
        tags: x64
        filters: msvc-x64
        prefix: x64
        commands:
          - 'bootstrap.bat'
          - 'b2 --prefix={{prefix}} --layout=system --without-serialization toolset=msvc variant=release link=static threading=multi runtime-link=shared address-model=64 install'

# Path settings
build_path: third-party/build
cache_path: third-party/cache
prefix: third-party/install